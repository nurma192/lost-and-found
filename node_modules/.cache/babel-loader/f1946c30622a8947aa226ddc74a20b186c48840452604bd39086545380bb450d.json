{"ast":null,"code":"import { timeData } from './time-data.generated';\n/**\n * Returns the best matching date time pattern if a date time skeleton\n * pattern is provided with a locale. Follows the Unicode specification:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#table-mapping-requested-time-skeletons-to-patterns\n * @param skeleton date time skeleton pattern that possibly includes j, J or C\n * @param locale\n */\nexport function getBestPattern(skeleton, locale) {\n  var skeletonCopy = '';\n  for (var patternPos = 0; patternPos < skeleton.length; patternPos++) {\n    var patternChar = skeleton.charAt(patternPos);\n    if (patternChar === 'j') {\n      var extraLength = 0;\n      while (patternPos + 1 < skeleton.length && skeleton.charAt(patternPos + 1) === patternChar) {\n        extraLength++;\n        patternPos++;\n      }\n      var hourLen = 1 + (extraLength & 1);\n      var dayPeriodLen = extraLength < 2 ? 1 : 3 + (extraLength >> 1);\n      var dayPeriodChar = 'a';\n      var hourChar = getDefaultHourSymbolFromLocale(locale);\n      if (hourChar == 'H' || hourChar == 'k') {\n        dayPeriodLen = 0;\n      }\n      while (dayPeriodLen-- > 0) {\n        skeletonCopy += dayPeriodChar;\n      }\n      while (hourLen-- > 0) {\n        skeletonCopy = hourChar + skeletonCopy;\n      }\n    } else if (patternChar === 'J') {\n      skeletonCopy += 'H';\n    } else {\n      skeletonCopy += patternChar;\n    }\n  }\n  return skeletonCopy;\n}\n/**\n * Maps the [hour cycle type](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/hourCycle)\n * of the given `locale` to the corresponding time pattern.\n * @param locale\n */\nfunction getDefaultHourSymbolFromLocale(locale) {\n  var hourCycle = locale.hourCycle;\n  if (hourCycle === undefined &&\n  // @ts-ignore hourCycle(s) is not identified yet\n  locale.hourCycles &&\n  // @ts-ignore\n  locale.hourCycles.length) {\n    // @ts-ignore\n    hourCycle = locale.hourCycles[0];\n  }\n  if (hourCycle) {\n    switch (hourCycle) {\n      case 'h24':\n        return 'k';\n      case 'h23':\n        return 'H';\n      case 'h12':\n        return 'h';\n      case 'h11':\n        return 'K';\n      default:\n        throw new Error('Invalid hourCycle');\n    }\n  }\n  // TODO: Once hourCycle is fully supported remove the following with data generation\n  var languageTag = locale.language;\n  var regionTag;\n  if (languageTag !== 'root') {\n    regionTag = locale.maximize().region;\n  }\n  var hourCycles = timeData[regionTag || ''] || timeData[languageTag || ''] || timeData[\"\".concat(languageTag, \"-001\")] || timeData['001'];\n  return hourCycles[0];\n}","map":{"version":3,"names":["timeData","getBestPattern","skeleton","locale","skeletonCopy","patternPos","length","patternChar","charAt","extraLength","hourLen","dayPeriodLen","dayPeriodChar","hourChar","getDefaultHourSymbolFromLocale","hourCycle","undefined","hourCycles","Error","languageTag","language","regionTag","maximize","region","concat"],"sources":["../date-time-pattern-generator.ts"],"sourcesContent":[null],"mappings":"AAAA,SAAQA,QAAQ,QAAO,uBAAuB;AAE9C;;;;;;;AAOA,OAAM,SAAUC,cAAcA,CAACC,QAAgB,EAAEC,MAAmB;EAClE,IAAIC,YAAY,GAAG,EAAE;EACrB,KAAK,IAAIC,UAAU,GAAG,CAAC,EAAEA,UAAU,GAAGH,QAAQ,CAACI,MAAM,EAAED,UAAU,EAAE,EAAE;IACnE,IAAME,WAAW,GAAGL,QAAQ,CAACM,MAAM,CAACH,UAAU,CAAC;IAE/C,IAAIE,WAAW,KAAK,GAAG,EAAE;MACvB,IAAIE,WAAW,GAAG,CAAC;MACnB,OACEJ,UAAU,GAAG,CAAC,GAAGH,QAAQ,CAACI,MAAM,IAChCJ,QAAQ,CAACM,MAAM,CAACH,UAAU,GAAG,CAAC,CAAC,KAAKE,WAAW,EAC/C;QACAE,WAAW,EAAE;QACbJ,UAAU,EAAE;MACd;MAEA,IAAIK,OAAO,GAAG,CAAC,IAAID,WAAW,GAAG,CAAC,CAAC;MACnC,IAAIE,YAAY,GAAGF,WAAW,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAIA,WAAW,IAAI,CAAC,CAAC;MAC/D,IAAIG,aAAa,GAAG,GAAG;MACvB,IAAIC,QAAQ,GAAGC,8BAA8B,CAACX,MAAM,CAAC;MAErD,IAAIU,QAAQ,IAAI,GAAG,IAAIA,QAAQ,IAAI,GAAG,EAAE;QACtCF,YAAY,GAAG,CAAC;MAClB;MAEA,OAAOA,YAAY,EAAE,GAAG,CAAC,EAAE;QACzBP,YAAY,IAAIQ,aAAa;MAC/B;MACA,OAAOF,OAAO,EAAE,GAAG,CAAC,EAAE;QACpBN,YAAY,GAAGS,QAAQ,GAAGT,YAAY;MACxC;IACF,CAAC,MAAM,IAAIG,WAAW,KAAK,GAAG,EAAE;MAC9BH,YAAY,IAAI,GAAG;IACrB,CAAC,MAAM;MACLA,YAAY,IAAIG,WAAW;IAC7B;EACF;EAEA,OAAOH,YAAY;AACrB;AAEA;;;;;AAKA,SAASU,8BAA8BA,CAACX,MAAmB;EACzD,IAAIY,SAAS,GAAGZ,MAAM,CAACY,SAAS;EAEhC,IACEA,SAAS,KAAKC,SAAS;EACvB;EACAb,MAAM,CAACc,UAAU;EACjB;EACAd,MAAM,CAACc,UAAU,CAACX,MAAM,EACxB;IACA;IACAS,SAAS,GAAGZ,MAAM,CAACc,UAAU,CAAC,CAAC,CAAC;EAClC;EAEA,IAAIF,SAAS,EAAE;IACb,QAAQA,SAAS;MACf,KAAK,KAAK;QACR,OAAO,GAAG;MACZ,KAAK,KAAK;QACR,OAAO,GAAG;MACZ,KAAK,KAAK;QACR,OAAO,GAAG;MACZ,KAAK,KAAK;QACR,OAAO,GAAG;MACZ;QACE,MAAM,IAAIG,KAAK,CAAC,mBAAmB,CAAC;IACxC;EACF;EAEA;EACA,IAAMC,WAAW,GAAGhB,MAAM,CAACiB,QAAQ;EACnC,IAAIC,SAA6B;EACjC,IAAIF,WAAW,KAAK,MAAM,EAAE;IAC1BE,SAAS,GAAGlB,MAAM,CAACmB,QAAQ,EAAE,CAACC,MAAM;EACtC;EACA,IAAMN,UAAU,GACdjB,QAAQ,CAACqB,SAAS,IAAI,EAAE,CAAC,IACzBrB,QAAQ,CAACmB,WAAW,IAAI,EAAE,CAAC,IAC3BnB,QAAQ,CAAC,GAAAwB,MAAA,CAAGL,WAAW,SAAM,CAAC,IAC9BnB,QAAQ,CAAC,KAAK,CAAC;EACjB,OAAOiB,UAAU,CAAC,CAAC,CAAC;AACtB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}