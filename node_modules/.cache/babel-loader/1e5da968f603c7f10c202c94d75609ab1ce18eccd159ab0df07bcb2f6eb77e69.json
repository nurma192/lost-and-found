{"ast":null,"code":"/*\nCopyright (c) 2014, Yahoo! Inc. All rights reserved.\nCopyrights licensed under the New BSD License.\nSee the accompanying LICENSE file for terms.\n*/\nimport { __assign, __rest, __spreadArray } from \"tslib\";\nimport { memoize, strategies } from '@formatjs/fast-memoize';\nimport { parse } from '@formatjs/icu-messageformat-parser';\nimport { formatToParts, PART_TYPE } from './formatters';\n// -- MessageFormat --------------------------------------------------------\nfunction mergeConfig(c1, c2) {\n  if (!c2) {\n    return c1;\n  }\n  return __assign(__assign(__assign({}, c1 || {}), c2 || {}), Object.keys(c1).reduce(function (all, k) {\n    all[k] = __assign(__assign({}, c1[k]), c2[k] || {});\n    return all;\n  }, {}));\n}\nfunction mergeConfigs(defaultConfig, configs) {\n  if (!configs) {\n    return defaultConfig;\n  }\n  return Object.keys(defaultConfig).reduce(function (all, k) {\n    all[k] = mergeConfig(defaultConfig[k], configs[k]);\n    return all;\n  }, __assign({}, defaultConfig));\n}\nfunction createFastMemoizeCache(store) {\n  return {\n    create: function () {\n      return {\n        get: function (key) {\n          return store[key];\n        },\n        set: function (key, value) {\n          store[key] = value;\n        }\n      };\n    }\n  };\n}\nfunction createDefaultFormatters(cache) {\n  if (cache === void 0) {\n    cache = {\n      number: {},\n      dateTime: {},\n      pluralRules: {}\n    };\n  }\n  return {\n    getNumberFormat: memoize(function () {\n      var _a;\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return new ((_a = Intl.NumberFormat).bind.apply(_a, __spreadArray([void 0], args, false)))();\n    }, {\n      cache: createFastMemoizeCache(cache.number),\n      strategy: strategies.variadic\n    }),\n    getDateTimeFormat: memoize(function () {\n      var _a;\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return new ((_a = Intl.DateTimeFormat).bind.apply(_a, __spreadArray([void 0], args, false)))();\n    }, {\n      cache: createFastMemoizeCache(cache.dateTime),\n      strategy: strategies.variadic\n    }),\n    getPluralRules: memoize(function () {\n      var _a;\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return new ((_a = Intl.PluralRules).bind.apply(_a, __spreadArray([void 0], args, false)))();\n    }, {\n      cache: createFastMemoizeCache(cache.pluralRules),\n      strategy: strategies.variadic\n    })\n  };\n}\nvar IntlMessageFormat = /** @class */function () {\n  function IntlMessageFormat(message, locales, overrideFormats, opts) {\n    if (locales === void 0) {\n      locales = IntlMessageFormat.defaultLocale;\n    }\n    var _this = this;\n    this.formatterCache = {\n      number: {},\n      dateTime: {},\n      pluralRules: {}\n    };\n    this.format = function (values) {\n      var parts = _this.formatToParts(values);\n      // Hot path for straight simple msg translations\n      if (parts.length === 1) {\n        return parts[0].value;\n      }\n      var result = parts.reduce(function (all, part) {\n        if (!all.length || part.type !== PART_TYPE.literal || typeof all[all.length - 1] !== 'string') {\n          all.push(part.value);\n        } else {\n          all[all.length - 1] += part.value;\n        }\n        return all;\n      }, []);\n      if (result.length <= 1) {\n        return result[0] || '';\n      }\n      return result;\n    };\n    this.formatToParts = function (values) {\n      return formatToParts(_this.ast, _this.locales, _this.formatters, _this.formats, values, undefined, _this.message);\n    };\n    this.resolvedOptions = function () {\n      var _a;\n      return {\n        locale: ((_a = _this.resolvedLocale) === null || _a === void 0 ? void 0 : _a.toString()) || Intl.NumberFormat.supportedLocalesOf(_this.locales)[0]\n      };\n    };\n    this.getAst = function () {\n      return _this.ast;\n    };\n    // Defined first because it's used to build the format pattern.\n    this.locales = locales;\n    this.resolvedLocale = IntlMessageFormat.resolveLocale(locales);\n    if (typeof message === 'string') {\n      this.message = message;\n      if (!IntlMessageFormat.__parse) {\n        throw new TypeError('IntlMessageFormat.__parse must be set to process `message` of type `string`');\n      }\n      var _a = opts || {},\n        formatters = _a.formatters,\n        parseOpts = __rest(_a, [\"formatters\"]);\n      // Parse string messages into an AST.\n      this.ast = IntlMessageFormat.__parse(message, __assign(__assign({}, parseOpts), {\n        locale: this.resolvedLocale\n      }));\n    } else {\n      this.ast = message;\n    }\n    if (!Array.isArray(this.ast)) {\n      throw new TypeError('A message must be provided as a String or AST.');\n    }\n    // Creates a new object with the specified `formats` merged with the default\n    // formats.\n    this.formats = mergeConfigs(IntlMessageFormat.formats, overrideFormats);\n    this.formatters = opts && opts.formatters || createDefaultFormatters(this.formatterCache);\n  }\n  Object.defineProperty(IntlMessageFormat, \"defaultLocale\", {\n    get: function () {\n      if (!IntlMessageFormat.memoizedDefaultLocale) {\n        IntlMessageFormat.memoizedDefaultLocale = new Intl.NumberFormat().resolvedOptions().locale;\n      }\n      return IntlMessageFormat.memoizedDefaultLocale;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  IntlMessageFormat.memoizedDefaultLocale = null;\n  IntlMessageFormat.resolveLocale = function (locales) {\n    if (typeof Intl.Locale === 'undefined') {\n      return;\n    }\n    var supportedLocales = Intl.NumberFormat.supportedLocalesOf(locales);\n    if (supportedLocales.length > 0) {\n      return new Intl.Locale(supportedLocales[0]);\n    }\n    return new Intl.Locale(typeof locales === 'string' ? locales : locales[0]);\n  };\n  IntlMessageFormat.__parse = parse;\n  // Default format options used as the prototype of the `formats` provided to the\n  // constructor. These are used when constructing the internal Intl.NumberFormat\n  // and Intl.DateTimeFormat instances.\n  IntlMessageFormat.formats = {\n    number: {\n      integer: {\n        maximumFractionDigits: 0\n      },\n      currency: {\n        style: 'currency'\n      },\n      percent: {\n        style: 'percent'\n      }\n    },\n    date: {\n      short: {\n        month: 'numeric',\n        day: 'numeric',\n        year: '2-digit'\n      },\n      medium: {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric'\n      },\n      long: {\n        month: 'long',\n        day: 'numeric',\n        year: 'numeric'\n      },\n      full: {\n        weekday: 'long',\n        month: 'long',\n        day: 'numeric',\n        year: 'numeric'\n      }\n    },\n    time: {\n      short: {\n        hour: 'numeric',\n        minute: 'numeric'\n      },\n      medium: {\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric'\n      },\n      long: {\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n        timeZoneName: 'short'\n      },\n      full: {\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n        timeZoneName: 'short'\n      }\n    }\n  };\n  return IntlMessageFormat;\n}();\nexport { IntlMessageFormat };","map":{"version":3,"names":["memoize","strategies","parse","formatToParts","PART_TYPE","mergeConfig","c1","c2","__assign","Object","keys","reduce","all","k","mergeConfigs","defaultConfig","configs","createFastMemoizeCache","store","create","get","key","set","value","createDefaultFormatters","cache","number","dateTime","pluralRules","getNumberFormat","args","_i","arguments","length","_a","Intl","NumberFormat","bind","apply","__spreadArray","strategy","variadic","getDateTimeFormat","DateTimeFormat","getPluralRules","PluralRules","IntlMessageFormat","message","locales","overrideFormats","opts","defaultLocale","_this","formatterCache","format","values","parts","result","part","type","literal","push","ast","formatters","formats","undefined","resolvedOptions","locale","resolvedLocale","toString","supportedLocalesOf","getAst","resolveLocale","__parse","TypeError","parseOpts","__rest","Array","isArray","defineProperty","memoizedDefaultLocale","Locale","supportedLocales","integer","maximumFractionDigits","currency","style","percent","date","short","month","day","year","medium","long","full","weekday","time","hour","minute","second","timeZoneName"],"sources":["../../src/core.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}